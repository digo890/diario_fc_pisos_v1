const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CreateObraPage-DrD1EWB3.js","assets/index-B8AJ77RJ.js","assets/react-vendor-7PqXWhc5.js","assets/index-CcUitD4H.css","assets/emailApi-aU3Tz6Cg.js","assets/SearchableBottomSheet-C1yLqjBT.js","assets/search-BEGimt_h.js","assets/arrow-left-DuykKinw.js","assets/user-round-Cd62TeDe.js","assets/circle-check-big-B6tA49Jg.js","assets/map-pin-DFNYG0Pl.js","assets/calendar-6k61YVon.js","assets/useSafeLogout-CswRB37V.js","assets/proxy-BZL43_Lm.js","assets/motion-vendor-B3HUmrK1.js","assets/mail-GLqEnMpV.js","assets/CreateUserPage-DbCde_su.js","assets/phone-B34cdH7r.js","assets/lock-DvTB73o1.js","assets/EditObraPage-DMJL7fOC.js","assets/hash-CVpZO_we.js","assets/EditUserPage-Bm3IX9rW.js","assets/ViewRespostasModal-JIVFLiwf.js","assets/clipboard-b_U0YAL8.js","assets/ResultadosDashboard-DoGZ2yQQ.js","assets/file-text-D47YZA0F.js","assets/clock-Cb9u-B34.js","assets/FilterModal-DbnrjJFo.js","assets/ProductionMonitorDashboard-BEtF6tnz.js","assets/trash-2-BZuJ-7VK.js"])))=>i.map(i=>d[i]);
import{c as C,s as Qe,a as Ye,R as we,j as e,b as Ze,r as t,X as Be,d as ea,e as Ne,f as re,C as ke,u as aa,g as sa,h as ta,i as ra,k as oa,l as ia,m as M,n as _e,o as Ce,p as na,q as la,t as Ee,v as Se,w as oe,x as De,L as P,_ as S,y as da,z as ca}from"./index-B8AJ77RJ.js";import{C as ga,A as T,u as xa,g as Oe,M as ma,S as ua,L as ha,a as Ae,F as Fe,b as ie}from"./useSafeLogout-CswRB37V.js";import{F as pa}from"./FcLogo-Bp6yGVHX.js";import{m as E}from"./proxy-BZL43_Lm.js";import{C as Le,B as ya}from"./circle-check-big-B6tA49Jg.js";import{P as Q,T as ne}from"./trash-2-BZuJ-7VK.js";import"./react-vendor-7PqXWhc5.js";import"./motion-vendor-B3HUmrK1.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fa=C("chart-column",ba);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],va=C("chevron-left",ja);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Na=C("chevrons-left",wa);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],_a=C("chevrons-right",ka);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Te=C("funnel",Ca);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Sa=C("layout-grid",Ea);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Oa=C("layout-list",Da);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],le=C("pen",Aa);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],$e=C("users",Fa);function La(a){return{id:a.id,cliente:a.cliente,obra:a.obra,cidade:a.cidade,data:a.data,encarregadoId:a.encarregado_id||a.encarregadoId,prepostoNome:a.preposto_nome||a.prepostoNome,prepostoEmail:a.preposto_email||a.prepostoEmail,status:a.status,progress:a.progress||0,createdAt:a.created_at?new Date(a.created_at).getTime():a.createdAt||Date.now(),updatedAt:a.updated_at?new Date(a.updated_at).getTime():a.updatedAt,createdBy:a.created_by||a.createdBy||"",validationToken:a.token_validacao||a.validationToken,validationTokenExpiry:a.token_validacao_expiry?new Date(a.token_validacao_expiry).getTime():a.validationTokenExpiry,validationTokenLastAccess:a.validation_token_last_access?new Date(a.validation_token_last_access).getTime():a.validationTokenLastAccess}}function Ta(a){return{id:a.id,nome:a.nome,tipo:a.tipo,email:a.email,telefone:a.telefone,createdAt:a.created_at?new Date(a.created_at).getTime():a.createdAt||Date.now()}}function $a(a){return{obra_id:a.obra_id||a.obraId,clima:a.clima||{},servicos:a.servicos||{},registros:a.registros||{},temperaturaMin:a.temperatura_min||a.temperaturaMin||"",temperaturaMax:a.temperatura_max||a.temperaturaMax||"",umidade:a.umidade||"",ucrete:a.ucrete||"",horarioInicio:a.horario_inicio||a.horarioInicio||"",horarioTermino:a.horario_termino||a.horarioTermino||"",area:a.area||"",espessura:a.espessura||"",rodape:a.rodape||"",estadoSubstrato:a.estado_substrato||a.estadoSubstrato||"",estadoSubstratoObs:a.estado_substrato_obs||a.estadoSubstratoObs||"",observacoes:a.observacoes||"",assinaturaEncarregado:a.assinatura_encarregado||a.assinaturaEncarregado,assinaturaPreposto:a.assinatura_preposto||a.assinaturaPreposto,prepostoConfirmado:a.preposto_confirmado||a.prepostoConfirmado,nomeCompletoPreposto:a.nome_completo_preposto||a.nomeCompletoPreposto,prepostoMotivoReprovacao:a.preposto_motivo_reprovacao||a.prepostoMotivoReprovacao,statusPreposto:a.status_preposto||a.statusPreposto,status:a.status||"novo",createdAt:a.created_at?new Date(a.created_at).getTime():a.createdAt||Date.now(),updatedAt:a.updated_at?new Date(a.updated_at).getTime():a.updatedAt||Date.now(),createdBy:a.created_by||a.createdBy||"",enviadoPrepostoAt:a.enviado_preposto_at?new Date(a.enviado_preposto_at).getTime():a.enviadoPrepostoAt,prepostoReviewedAt:a.preposto_reviewed_at?new Date(a.preposto_reviewed_at).getTime():a.prepostoReviewedAt,prepostoReviewedBy:a.preposto_reviewed_by||a.prepostoReviewedBy,completedAt:a.completed_at?new Date(a.completed_at).getTime():a.completedAt,emailsEnviados:a.emails_enviados||a.emailsEnviados}}function Me(a,o){return o}async function Ra(a,o){const n=new Map;a.forEach(c=>{n.set(c.id,c)});const r=[];for(const c of o){const y=La(c),k=n.get(y.id),g=Me(k,y);n.set(y.id,g),r.push(g)}return r.length>0&&await Ye(r),Array.from(n.values())}async function Ia(a,o){const n=new Map;a.forEach(c=>{n.set(c.id,c)});const r=[];for(const c of o){const y=Ta(c),k=n.get(y.id),g=Me(k,y);n.set(y.id,g),r.push(g)}return r.length>0&&await Qe(r),Array.from(n.values())}const de=({currentPage:a,totalPages:o,onPageChange:n,totalItems:r,itemsPerPage:c=10})=>{if(o<=1)return null;const y=()=>{a>1&&n(a-1)},k=()=>{a<o&&n(a+1)},g=()=>{n(1)},D=()=>{n(o)},O=(a-1)*c+1,b=Math.min(a*c,r||0),f=(()=>{const u=[];if(o<=5)for(let h=1;h<=o;h++)u.push(h);else a<=3?u.push(1,2,3,4,"...",o):a>=o-2?u.push(1,"...",o-3,o-2,o-1,o):u.push(1,"...",a-1,a,a+1,"...",o);return u})();return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-4 px-2",children:[r&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 order-2 sm:order-1",children:["Mostrando ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:O})," a"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b})," de"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r})," itens"]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsx("button",{onClick:g,disabled:a===1,className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Primeira p√°gina",children:e.jsx(Na,{className:"w-4 h-4"})}),e.jsx("button",{onClick:y,disabled:a===1,className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"P√°gina anterior",children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:f.map((u,j)=>{if(u==="...")return e.jsx("span",{className:"w-9 h-9 flex items-center justify-center text-gray-500 dark:text-gray-400",children:"..."},`ellipsis-${j}`);const h=u,p=h===a;return e.jsx("button",{onClick:()=>n(h),className:`
                  w-9 h-9 flex items-center justify-center rounded-lg font-medium transition-all
                  ${p?"bg-[#FD5521] text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}
                `,"aria-label":`P√°gina ${h}`,"aria-current":p?"page":void 0,children:h},h)})}),e.jsxs("div",{className:"sm:hidden flex items-center px-3 py-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm font-medium text-gray-900 dark:text-white",children:[a," / ",o]}),e.jsx("button",{onClick:k,disabled:a===o,className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"Pr√≥xima p√°gina",children:e.jsx(ga,{className:"w-4 h-4"})}),e.jsx("button",{onClick:D,disabled:a===o,className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors","aria-label":"√öltima p√°gina",children:e.jsx(_a,{className:"w-4 h-4"})})]})]})},Re=(a,o=10)=>{const[n,r]=we.useState(1);we.useEffect(()=>{r(1)},[a.length]);const c=Math.ceil(a.length/o),y=(n-1)*o,k=y+o,g=a.slice(y,k);return{currentPage:n,totalPages:c,paginatedItems:g,totalItems:a.length,itemsPerPage:o,setCurrentPage:r}};function Ma({className:a=""}){const{pendingCount:o,failedCount:n,isOnline:r,hasPendingOperations:c,retryFailed:y,processPending:k}=Ze(),[g,D]=t.useState(!1),[O,b]=t.useState(!1),[$,f]=t.useState(!0),[u,j]=t.useState(!1),h=t.useRef({pendingCount:o,failedCount:n,isOnline:r}),p=t.useRef(null),R=()=>{f(!0),p.current&&clearTimeout(p.current),!(c||!r||u)&&(p.current=setTimeout(()=>{!u&&!g&&f(!1)},4e3))};t.useEffect(()=>{(h.current.pendingCount!==o||h.current.failedCount!==n||h.current.isOnline!==r)&&R(),h.current={pendingCount:o,failedCount:n,isOnline:r}},[o,n,r,u,g,c]),t.useEffect(()=>{u?(f(!0),p.current&&clearTimeout(p.current)):!c&&r&&!g&&R()},[u,c,r,g]),t.useEffect(()=>{g&&(f(!0),p.current&&clearTimeout(p.current))},[g]),t.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const x=async()=>{b(!0);try{n>0?await y():await k()}finally{b(!1)}},w=r?n>0?{icon:ke,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/20",label:"Erro",description:`${n} opera√ß√£o(√µes) falharam`}:o>0?{icon:re,color:"text-yellow-600",bgColor:"bg-yellow-100 dark:bg-yellow-900/20",label:"Sincronizando",description:`${o} opera√ß√£o(√µes) pendente(s)`}:{icon:Le,color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/20",label:"Sincronizado",description:"Tudo sincronizado"}:{icon:Ne,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800",label:"Offline",description:"Sem conex√£o com a internet"},Y=w.icon;return e.jsxs("div",{className:`relative ${a}`,children:[e.jsx(T,{children:$&&e.jsxs(E.button,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.3,ease:"easeOut"},onClick:()=>D(!g),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),className:`flex items-center gap-2 px-3 py-2 rounded-lg ${w.bgColor} ${w.color} hover:opacity-80 transition-all relative`,title:w.description,children:[e.jsx(Y,{className:`w-4 h-4 ${o>0&&r?"animate-spin":""}`}),c&&e.jsx(E.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-[#FD5521] text-white text-xs font-medium rounded-full flex items-center justify-center",children:o+n}),e.jsx("span",{className:"hidden md:inline text-sm font-medium",children:w.label})]})}),e.jsx(T,{children:g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>D(!1)}),e.jsxs(E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 z-50 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Status de Sincroniza√ß√£o"}),e.jsx("button",{onClick:()=>D(!1),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500",children:e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[r?e.jsx(ea,{className:"w-5 h-5 text-green-500"}):e.jsx(Ne,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r?"Online":"Offline"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:r?"Conectado ao servidor":"Sem conex√£o - mudan√ßas ser√£o sincronizadas quando voltar online"})]})]}),o>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx(re,{className:"w-5 h-5 text-yellow-600 animate-spin"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[o," opera√ß√£o(√µes) pendente(s)"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Aguardando sincroniza√ß√£o"})]})]}),n>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-red-50 dark:bg-red-900/20",children:[e.jsx(ke,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n," opera√ß√£o(√µes) falharam"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:'Clique em "Tentar Novamente"'})]})]}),!c&&r&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-green-50 dark:bg-green-900/20",children:[e.jsx(Le,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Tudo sincronizado"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"N√£o h√° opera√ß√µes pendentes"})]})]})]}),c&&r&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("button",{onClick:x,disabled:O,className:"w-full px-4 py-2 rounded-lg bg-[#FD5521] text-white hover:bg-[#E54A1D] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(re,{className:`w-4 h-4 ${O?"animate-spin":""}`}),e.jsx("span",{children:O?"Sincronizando...":"Tentar Novamente"})]})})]})]})})]})}const Pa=t.lazy(()=>S(()=>import("./CreateObraPage-DrD1EWB3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),Ua=t.lazy(()=>S(()=>import("./CreateUserPage-DbCde_su.js"),__vite__mapDeps([16,1,2,3,7,8,15,17,18,13,14]))),za=t.lazy(()=>S(()=>import("./EditObraPage-DMJL7fOC.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,20,8,9,10,11,12,13,14,15]))),Va=t.lazy(()=>S(()=>import("./EditUserPage-Bm3IX9rW.js"),__vite__mapDeps([21,1,2,3,7,20,8,15,17,18,13,14]))),qa=t.lazy(()=>S(()=>import("./ViewRespostasModal-JIVFLiwf.js"),__vite__mapDeps([22,1,2,3,12,13,14,23]))),Wa=t.lazy(()=>S(()=>import("./ResultadosDashboard-DoGZ2yQQ.js"),__vite__mapDeps([24,1,2,3,12,13,14,25,26,11]))),Ha=t.lazy(()=>S(()=>import("./FilterModal-DbnrjJFo.js"),__vite__mapDeps([27,1,2,3,6,12,13,14])));t.lazy(()=>S(()=>import("./ProductionMonitorDashboard-BEtF6tnz.js"),__vite__mapDeps([28,1,2,3,9,29])));const Ie=["bg-[#FD5521]","bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-amber-500","bg-cyan-500","bg-rose-500"],Ga=a=>{let o=0;for(let r=0;r<a.length;r++)o=a.charCodeAt(r)+((o<<5)-o);const n=Math.abs(o)%Ie.length;return Ie[n]},ts=()=>{const{currentUser:a}=aa(),{theme:o,toggleTheme:n}=sa(),{showToast:r,ToastComponent:c}=ta(),{handleLogout:y,forceLogout:k,cancelLogout:g,showLogoutConfirm:D,pendingCount:O}=xa(),[b,$]=t.useState("resultados"),[f,u]=t.useState([]),[j,h]=t.useState([]),[p,R]=t.useState([]),[x,ce]=t.useState("todas"),[w,Y]=t.useState("todos"),[ge,Z]=t.useState(!1),[Ja,Xa]=t.useState(!1),[Pe,xe]=t.useState(!1),[I,Ue]=t.useState("grid"),[U,ze]=t.useState(""),[H,Ve]=t.useState(""),[qe,z]=t.useState(!1),[We,B]=t.useState(!1),[me,G]=t.useState(null),[ue,ee]=t.useState(null),[V,he]=t.useState(null),[He,pe]=t.useState(null),[q,J]=t.useState(null),[W,X]=t.useState(null),[ye,ae]=t.useState(!1);t.useEffect(()=>{F()},[]),t.useEffect(()=>{V&&Ke(V.id)},[V]);const Ge=async s=>{try{const l=await Ce.delete(s);l.success?(await Se(s),await da(s),await F(),J(null),r("Obra exclu√≠da com sucesso!","success")):r(`Erro ao excluir obra: ${l.error}`,"error")}catch(l){oe("‚ùå Erro ao excluir obra:",l),r(`Erro ao excluir obra: ${l.message}`,"error")}},Je=async s=>{const l=f.filter(i=>i.encarregadoId===s);if(l.length>0){const i=W?.nome||"Este usu√°rio";r(`‚ùå N√£o √© poss√≠vel excluir ${i}. Ele √© respons√°vel por ${l.length} obra(s). Reatribua as obras antes de excluir.`,"error"),X(null);return}try{const i=await _e.delete(s);if(i.success)await ca(s),await F(),X(null),r("Usu√°rio exclu√≠do com sucesso!","success");else{const d=typeof i.error=="string"?i.error:i.error?.message||JSON.stringify(i.error)||"Erro desconhecido";r(`Erro ao excluir usu√°rio: ${d}`,"error")}}catch(i){oe("‚ùå Erro ao excluir usu√°rio:",i);const d=i?.message||String(i)||"Erro desconhecido";r(`Erro ao excluir usu√°rio: ${d}`,"error")}},Xe=()=>{he(null),pe(null)},K=t.useMemo(()=>f.filter(s=>{if(x==="todas")return!0;const l=p.find(d=>d.obra_id===s.id),i=Oe(s,l);return x==="novo"?i==="novo":x==="em_andamento"?i==="em_preenchimento"||i==="reprovado_preposto":x==="conferencia"?i==="enviado_preposto":x==="concluidas"?i==="concluido":!0}).filter(s=>s.cliente.toLowerCase().includes(U.toLowerCase())||s.obra.toLowerCase().includes(U.toLowerCase())).sort((s,l)=>l.createdAt-s.createdAt),[f,p,x,U]),be=t.useMemo(()=>j.filter(s=>w==="todos"?!0:s.tipo===w).filter(s=>s.nome.toLowerCase().includes(H.toLowerCase())).sort((s,l)=>s.nome.localeCompare(l.nome)),[j,w,H]),N=Re(K,10),A=Re(be,10),fe=t.useMemo(()=>new Map(j.map(s=>[s.id,s])),[j]),je=t.useCallback(s=>fe.get(s)?.nome||"N/A",[fe]),F=async()=>{if(!Pe){xe(!0);try{const[s,l,i]=await Promise.all([ra(),oa(),ia()]);if(navigator.onLine)try{M("üîÑ Buscando dados do backend...");const[m,se,te]=await Promise.all([_e.list(),Ce.list(),na.list()]);if(m.success&&m.data){const L=m.data,_=await Ia(l,L);h(_),M(`‚úÖ ${_.length} usu√°rios sincronizados (merge)`)}if(se.success&&se.data){const L=se.data,_=await Ra(s,L);u(_),M(`‚úÖ ${_.length} obras sincronizadas (merge)`)}if(te.success&&te.data){const L=te.data.map(_=>$a(_));for(const _ of L)await la(_);R(L),M(`‚úÖ ${L.length} formul√°rios sincronizados`)}else R(i),M(`üìÇ ${i.length} formul√°rios locais carregados`);ae(!1);return}catch(m){Ee("‚ö†Ô∏è Erro ao buscar dados do backend, usando cache local:",m),r("‚ö†Ô∏è Sem conex√£o com servidor. Exibindo dados locais (podem estar desatualizados).","warning")}else r("üì° Modo offline. Exibindo dados locais.","warning");M("üìÇ Usando dados locais do IndexedDB");const d=s.filter(m=>m.id&&m.cliente&&m.obra&&m.cidade&&m.encarregadoId),v=s.filter(m=>!m.id||!m.cliente||!m.obra||!m.cidade||!m.encarregadoId);v.length>0&&(Ee(`‚ö†Ô∏è Removendo ${v.length} obra(s) corrompida(s)`),await Promise.all(v.map(async m=>{m.id&&await Se(m.id)}))),u(d),h(l),R(i),ae(!1)}catch(s){oe("‚ùå Erro ao carregar dados:",s),u([]),h([])}finally{xe(!1)}}},Ke=async s=>{const l=await De(s);pe(l||null)},ve=async s=>{if(["enviado_preposto","reprovado_preposto","concluido"].includes(s.status)&&!await De(s.id)){r("‚ö†Ô∏è Formul√°rio n√£o encontrado. Recarregue a p√°gina (F5) ou contate o suporte.","warning");return}he(s)};return e.jsxs("div",{className:"min-h-screen bg-[#EDEFE4] dark:bg-gray-950",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#FD5521] flex items-center justify-center flex-shrink-0 p-2",children:e.jsx(pa,{})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Administrativo"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ma,{}),e.jsx("button",{onClick:n,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 
                         text-gray-600 dark:text-gray-400`,"aria-label":"Alternar tema claro/escuro",children:o==="light"?e.jsx(ma,{className:"w-5 h-5"}):e.jsx(ua,{className:"w-5 h-5"})}),e.jsx("button",{onClick:y,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 
                         text-gray-600 dark:text-gray-400`,"aria-label":"Sair do sistema",children:e.jsx(ha,{className:"w-5 h-5"})})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("button",{onClick:()=>$("resultados"),className:`py-4 px-2 border-b-2 font-medium transition-colors flex items-center gap-2 ${b==="resultados"?"border-[#FD5521] text-[#FD5521]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(fa,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:inline",children:"Resultados"})]}),e.jsxs("button",{onClick:()=>$("obras"),className:`py-4 px-2 border-b-2 font-medium transition-colors flex items-center gap-2 ${b==="obras"?"border-[#FD5521] text-[#FD5521]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(ya,{className:"w-5 h-5"}),e.jsxs("span",{className:"md:hidden",children:["(",f.length,")"]}),e.jsxs("span",{className:"hidden md:inline",children:["Obras (",f.length,")"]})]}),e.jsxs("button",{onClick:()=>$("usuarios"),className:`py-4 px-2 border-b-2 font-medium transition-colors flex items-center gap-2 ${b==="usuarios"?"border-[#FD5521] text-[#FD5521]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx($e,{className:"w-5 h-5"}),e.jsxs("span",{className:"md:hidden",children:["(",j.length,")"]}),e.jsxs("span",{className:"hidden md:inline",children:["Usu√°rios (",j.length,")"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsx(T,{mode:"wait",children:b==="resultados"?e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Wa,{obras:f})})},"resultados"):b==="obras"?e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Obras"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ue(I==="grid"?"list":"grid"),className:"hidden md:flex w-12 h-12 rounded-full bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors items-center justify-center shadow-md",title:I==="grid"?"Visualizar como lista":"Visualizar como cards",children:I==="grid"?e.jsx(Oa,{className:"w-5 h-5"}):e.jsx(Sa,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>Z(!0),className:"w-12 h-12 rounded-full bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center shadow-md relative",children:[e.jsx(Te,{className:"w-5 h-5"}),(x!=="todas"||U.trim()!=="")&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#FD5521] rounded-full"})]}),e.jsx("button",{onClick:()=>z(!0),className:"w-12 h-12 rounded-full bg-[#FD5521] text-white hover:bg-[#E54A1D] transition-colors flex items-center justify-center shadow-md",children:e.jsx(Q,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:`space-y-3 ${I==="list"?"md:hidden":""}`,children:[ye&&e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-900 rounded-xl p-3",children:[e.jsxs("div",{className:"rounded-xl px-5 py-4 mb-2.5 bg-gradient-to-r from-gray-200 to-gray-100 dark:from-gray-800 dark:to-gray-700 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-3 w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-4 w-1/3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2.5",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-32"}),e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-20"})]}),e.jsx("div",{className:"mt-2 text-center text-sm text-gray-500 dark:text-gray-400 animate-pulse",children:"Criando di√°rio de obra..."})]}),N.paginatedItems.map(s=>{const l=p.find(v=>v.obra_id===s.id),i=Ae(s,l),d=Oe(s,l);return e.jsxs("div",{onClick:()=>ve(s),className:"bg-white dark:bg-gray-900 rounded-xl p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all relative",children:[e.jsxs("div",{className:`rounded-xl px-5 py-4 mb-2.5 ${d==="novo"?"bg-gradient-to-r from-[#fff5df] to-[#f7e3cc] dark:from-gray-800 dark:to-gray-800":d==="enviado_preposto"?"bg-gradient-to-r from-[#dbf3f3] to-[#ccdbf7] dark:from-gray-800 dark:to-gray-800":d==="concluido"?"bg-gradient-to-r from-[#afffb5] to-[#c1f3ff] dark:from-gray-800 dark:to-gray-800":"bg-gradient-to-r from-[#e7f3db] to-[#ccf7f3] dark:from-gray-800 dark:to-gray-800"}`,children:[e.jsxs("h3",{className:"font-semibold text-xl leading-6 text-gray-900 dark:text-white mb-3",children:[s.cliente," - ",s.obra]}),e.jsxs("p",{className:"font-['Cousine',monospace] text-sm text-gray-900/[0.56] dark:text-gray-400/[0.56] mb-4 tracking-[1px]",children:["#",String(s.id).slice(-5)," - ",s.createdAt?new Date(Number(s.createdAt)).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit"}):"N/A"]}),e.jsxs("div",{className:"space-y-2 text-sm leading-normal text-gray-900 dark:text-white",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-normal",children:"Cidade: "}),e.jsx("span",{className:"font-semibold",children:s.cidade})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-normal",children:"Encarregado: "}),e.jsx("span",{className:"font-semibold",children:je(s.encarregadoId)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-normal",children:"Preposto: "}),e.jsx("span",{className:"font-semibold",children:s.prepostoNome||s.prepostoEmail||"N/A"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"relative w-2.5 h-2.5",children:e.jsxs("svg",{className:"absolute inset-0",viewBox:"0 0 18 18",fill:"none",children:[e.jsx("circle",{cx:"9",cy:"9",r:"5",className:i.color.includes("blue")?"fill-blue-600":i.color.includes("green")?"fill-green-600":i.color.includes("yellow")?"fill-yellow-600":i.color.includes("purple")?"fill-purple-600":i.color.includes("orange")?"fill-orange-600":"fill-gray-400"}),e.jsx("circle",{cx:"9",cy:"9",r:"7",className:i.color.includes("blue")?"stroke-blue-600":i.color.includes("green")?"stroke-green-600":i.color.includes("yellow")?"stroke-yellow-600":i.color.includes("purple")?"stroke-purple-600":i.color.includes("orange")?"stroke-orange-600":"stroke-gray-400",strokeOpacity:"0.24",strokeWidth:"4"})]})}),e.jsx("span",{className:`font-medium text-base leading-normal ${i.color.includes("blue")?"text-blue-600":i.color.includes("green")?"text-green-600":i.color.includes("yellow")?"text-yellow-600":i.color.includes("purple")?"text-purple-600":i.color.includes("orange")?"text-orange-600":"text-gray-600"}`,children:i.label})]}),e.jsxs("div",{className:"flex gap-[6px]",children:[e.jsx("button",{onClick:v=>{if(v.stopPropagation(),d==="concluido"||d==="enviado_preposto"){r(`Obras ${d==="concluido"?"conclu√≠das":"aguardando confer√™ncia"} n√£o podem ser editadas`,"error");return}G(s)},className:`p-2 rounded-[10px] transition-colors ${d==="concluido"||d==="enviado_preposto"?"opacity-40 cursor-not-allowed text-gray-400 dark:text-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,title:d==="concluido"||d==="enviado_preposto"?`Obras ${d==="concluido"?"conclu√≠das":"aguardando confer√™ncia"} n√£o podem ser editadas`:"Editar",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("button",{onClick:v=>{v.stopPropagation(),J(s)},className:"p-2 rounded-[10px] hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",title:"Excluir",children:e.jsx(ne,{className:"w-5 h-5"})})]})]})]},s.id)}),K.length===0&&(f.length===0?e.jsx("button",{onClick:()=>z(!0),className:"w-full text-center py-12 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl transition-colors group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#FD5521]/10 flex items-center justify-center group-hover:bg-[#FD5521]/20 transition-colors",children:e.jsx(Q,{className:"w-8 h-8 text-[#FD5521]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium mb-1",children:"Nenhuma obra cadastrada"}),e.jsx("p",{className:"text-sm text-[#FD5521] group-hover:underline",children:"Clique aqui para cadastrar a primeira obra"})]})]})}):e.jsx("div",{className:"w-full bg-[#f1f3ea] dark:bg-gray-900/50 rounded-[10px] pt-[48px] pb-[48px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e6e8dc] dark:bg-gray-800 flex items-center justify-center",children:e.jsx(Fe,{className:"w-8 h-8 text-[#C6CCC2] dark:text-gray-600",strokeWidth:2})}),e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsxs("p",{className:"text-[#101828] dark:text-white font-normal text-base leading-6",children:["Nenhuma obra ",x==="novo"?"nova":x==="em_andamento"?"em andamento":x==="conferencia"?"em confer√™ncia":x==="concluidas"?"conclu√≠da":""]}),e.jsx("p",{className:"text-[#6a7282] dark:text-gray-400 text-sm leading-5",children:x==="todas"?"Nenhuma obra encontrada":"Altere o filtro para ver outras obras"})]})]})}))]}),K.length>0&&e.jsx("div",{className:I==="list"?"md:hidden":"",children:e.jsx(de,{currentPage:N.currentPage,totalPages:N.totalPages,onPageChange:N.setCurrentPage,totalItems:N.totalItems,itemsPerPage:N.itemsPerPage})}),e.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-lg overflow-hidden ${I==="list"?"hidden md:block":"hidden"}`,children:[ye&&e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"px-5 py-4 border-b border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-2 w-2/3"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-32"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-20"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded"}),e.jsx("div",{className:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded"})]})]}),e.jsx("div",{className:"mt-2 text-center text-sm text-gray-500 dark:text-gray-400",children:"Criando di√°rio de obra..."})]})}),K.length>0?e.jsxs(e.Fragment,{children:[N.paginatedItems.map((s,l)=>{const i=p.find(v=>v.obra_id===s.id),d=Ae(s,i);return e.jsxs("div",{children:[e.jsx("div",{onClick:()=>ve(s),className:"px-5 py-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white truncate",children:[s.cliente," - ",s.obra]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsx("div",{className:"relative w-2 h-2",children:e.jsx("svg",{className:"absolute inset-0",viewBox:"0 0 18 18",fill:"none",children:e.jsx("circle",{cx:"9",cy:"9",r:"5",className:d.color.includes("blue")?"fill-blue-600":d.color.includes("green")?"fill-green-600":d.color.includes("yellow")?"fill-yellow-600":"fill-gray-400"})})}),e.jsx("span",{className:`font-medium text-sm ${d.color.includes("blue")?"text-blue-600":d.color.includes("green")?"text-green-600":d.color.includes("yellow")?"text-yellow-600":"text-gray-600"}`,children:d.label})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-300",children:s.cidade})}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:je(s.encarregadoId)}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit"})}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{className:"font-['Cousine',monospace] text-xs",children:["#",String(s.id).slice(-5)]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:v=>{if(v.stopPropagation(),s.status==="concluido"||s.status==="enviado_preposto"){r(`Obras ${s.status==="concluido"?"conclu√≠das":"aguardando confer√™ncia"} n√£o podem ser editadas`,"error");return}G(s)},className:`p-2 rounded-lg transition-colors ${s.status==="concluido"||s.status==="enviado_preposto"?"opacity-40 cursor-not-allowed text-gray-400 dark:text-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400"}`,title:s.status==="concluido"||s.status==="enviado_preposto"?`Obras ${s.status==="concluido"?"conclu√≠das":"aguardando confer√™ncia"} n√£o podem ser editadas`:"Editar",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v=>{v.stopPropagation(),J(s)},className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",title:"Excluir",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})}),l<N.paginatedItems.length-1&&e.jsx("div",{className:"mx-5 border-b border-[#EDEFE4] dark:border-gray-800"})]},s.id)}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:e.jsx(de,{currentPage:N.currentPage,totalPages:N.totalPages,onPageChange:N.setCurrentPage,totalItems:N.totalItems,itemsPerPage:N.itemsPerPage})})]}):f.length===0?e.jsx("button",{onClick:()=>z(!0),className:"w-full text-center py-12 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#FD5521]/10 flex items-center justify-center group-hover:bg-[#FD5521]/20 transition-colors",children:e.jsx(Q,{className:"w-8 h-8 text-[#FD5521]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium mb-1",children:"Nenhuma obra cadastrada"}),e.jsx("p",{className:"text-sm text-[#FD5521] group-hover:underline",children:"Clique aqui para cadastrar a primeira obra"})]})]})}):e.jsx("div",{className:"w-full bg-[#f1f3ea] dark:bg-gray-900/50 rounded-[10px] pt-[48px] pb-[48px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e6e8dc] dark:bg-gray-800 flex items-center justify-center",children:e.jsx(Fe,{className:"w-8 h-8 text-[#C6CCC2] dark:text-gray-600",strokeWidth:2})}),e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsxs("p",{className:"text-[#101828] dark:text-white font-normal text-base leading-6",children:["Nenhuma obra ",x==="novo"?"nova":x==="em_andamento"?"em andamento":x==="conferencia"?"em confer√™ncia":x==="concluidas"?"conclu√≠da":""]}),e.jsx("p",{className:"text-[#6a7282] dark:text-gray-400 text-sm leading-5",children:x==="todas"?"Nenhuma obra encontrada":"Altere o filtro para ver outras obras"})]})]})})]})]},"obras"):e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Usu√°rios"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>Z(!0),className:"w-12 h-12 rounded-full bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center shadow-md relative",children:[e.jsx(Te,{className:"w-5 h-5"}),(w!=="todos"||H.trim()!=="")&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#FD5521] rounded-full"})]}),e.jsx("button",{onClick:()=>B(!0),className:"w-12 h-12 rounded-full bg-[#FD5521] text-white hover:bg-[#E54A1D] transition-colors flex items-center justify-center shadow-md",children:e.jsx(Q,{className:"w-6 h-6"})})]})]}),be.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg overflow-hidden",children:A.paginatedItems.map((s,l)=>e.jsxs("div",{children:[e.jsxs("div",{className:"px-5 py-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${Ga(s.id)} text-white flex items-center justify-center font-medium flex-shrink-0`,children:s.nome.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.nome}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.tipo})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ee(s),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400",title:"Editar",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>X(s),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",title:"Excluir",children:e.jsx(ne,{className:"w-5 h-5"})})]})]}),l<A.paginatedItems.length-1&&e.jsx("div",{className:"mx-5 border-b border-[#EDEFE4] dark:border-gray-800"})]},s.id))}),e.jsx(de,{currentPage:A.currentPage,totalPages:A.totalPages,onPageChange:A.setCurrentPage,totalItems:A.totalItems,itemsPerPage:A.itemsPerPage})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx($e,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-700"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w==="todos"?"Nenhum usu√°rio encontrado":`Nenhum ${w==="Encarregado"?"encarregado":"administrador"} encontrado`})]})]},"usuarios")})}),e.jsx(T,{mode:"wait",children:qe&&e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Pa,{users:j,onBack:()=>z(!1),onSuccess:()=>{z(!1),ae(!0),F()}})})}),e.jsx(T,{mode:"wait",children:We&&e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Ua,{onBack:()=>B(!1),onSuccess:()=>{F(),B(!1)}})})}),e.jsx(T,{mode:"wait",children:me&&e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(za,{obra:me,users:j,onBack:()=>G(null),onSuccess:()=>{F(),G(null)}})})}),e.jsx(T,{mode:"wait",children:ue&&e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Va,{user:ue,onBack:()=>ee(null),onSuccess:()=>{F(),ee(null)}})})}),V&&e.jsx(t.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(qa,{obra:V,users:j,formData:He,onClose:Xe})}),q&&e.jsx(ie,{isOpen:!!q,title:"Excluir Obra",message:`Deseja realmente excluir a obra "${q.cliente} - ${q.obra}"? Esta a√ß√£o n√£o pode ser desfeita.`,confirmLabel:"Excluir",cancelLabel:"Cancelar",variant:"danger",onConfirm:()=>Ge(q.id),onCancel:()=>J(null)}),W&&e.jsx(ie,{isOpen:!!W,title:"Excluir Usu√°rio",message:`Deseja realmente excluir o usu√°rio "${W.nome}"? Esta a√ß√£o n√£o pode ser desfeita.`,confirmLabel:"Excluir",cancelLabel:"Cancelar",variant:"danger",onConfirm:()=>Je(W.id),onCancel:()=>X(null)}),e.jsx(Ha,{isOpen:ge,onClose:()=>Z(!1),type:b==="obras"?"obras":"usuarios",currentFilter:b==="obras"?x:w,onFilterChange:s=>{b==="obras"?ce(s):Y(s)},onSearchChange:s=>{b==="obras"?ze(s):Ve(s)},searchValue:b==="obras"?U:H}),e.jsx(ie,{isOpen:D,title:"Dados n√£o sincronizados",message:`Voc√™ tem ${O} opera√ß√£o(√µes) aguardando sincroniza√ß√£o com o servidor. Se sair agora, esses dados podem ser perdidos. Deseja realmente sair?`,confirmLabel:"Sair mesmo assim",cancelLabel:"Cancelar",variant:"warning",onConfirm:k,onCancel:g}),c]})};export{ts as default};
