import{R as pe,r as E,h as ge,j as t,C as re,B as ae,D as H,w as oe}from"./index-B8AJ77RJ.js";import{_ as fe}from"./typeof-QjJsDpFa.js";import{g as he}from"./react-vendor-7PqXWhc5.js";import{C as se,B as ve}from"./circle-check-big-B6tA49Jg.js";import{F as ye}from"./file-text-D47YZA0F.js";import{U as be}from"./user-round-Cd62TeDe.js";import{M as we}from"./map-pin-DFNYG0Pl.js";import{C as je}from"./calendar-6k61YVon.js";import{m as ie}from"./proxy-BZL43_Lm.js";import"./motion-vendor-B3HUmrK1.js";function Y(){return Y=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var e in o)({}).hasOwnProperty.call(o,e)&&(r[e]=o[e])}return r},Y.apply(null,arguments)}function _e(r,a){if(r==null)return{};var o={};for(var e in r)if({}.hasOwnProperty.call(r,e)){if(a.indexOf(e)!==-1)continue;o[e]=r[e]}return o}function Ne(r,a){if(r==null)return{};var o,e,s=_e(r,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(e=0;e<i.length;e++)o=i[e],a.indexOf(o)===-1&&{}.propertyIsEnumerable.call(r,o)&&(s[o]=r[o])}return s}function ke(r,a,o){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Pe(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function J(r,a){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,e){return o.__proto__=e,o},J(r,a)}function Ce(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&J(r,a)}function $(r){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},$(r)}function me(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(me=function(){return!!r})()}function Ee(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Se(r,a){if(a&&(fe(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(r)}function Te(r){var a=me();return function(){var o,e=$(r);if(a){var s=$(this).constructor;o=Reflect.construct(e,arguments,s)}else o=e.apply(this,arguments);return Se(this,o)}}var G={exports:{}},Q,ne;function Re(){if(ne)return Q;ne=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Q=r,Q}var X,le;function De(){if(le)return X;le=1;var r=Re();function a(){}function o(){}return o.resetWarningCache=a,X=function(){function e(d,n,c,l,u,x){if(x!==r){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function s(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:o,resetWarningCache:a};return i.PropTypes=i,i},X}var de;function Fe(){return de||(de=1,G.exports=De()()),G.exports}var Me=Fe();const C=he(Me);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function A(r,a,o){this.x=r,this.y=a,this.time=o||new Date().getTime()}A.prototype.velocityFrom=function(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):1};A.prototype.distanceTo=function(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))};A.prototype.equals=function(r){return this.x===r.x&&this.y===r.y&&this.time===r.time};function K(r,a,o,e){this.startPoint=r,this.control1=a,this.control2=o,this.endPoint=e}K.prototype.length=function(){for(var r=10,a=0,o=void 0,e=void 0,s=0;s<=r;s+=1){var i=s/r,d=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),n=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(s>0){var c=d-o,l=n-e;a+=Math.sqrt(c*c+l*l)}o=d,e=n}return a};K.prototype._point=function(r,a,o,e,s){return a*(1-r)*(1-r)*(1-r)+3*o*(1-r)*(1-r)*r+3*e*(1-r)*r*r+s*r*r*r};function Oe(r,a,o){var e,s,i,d=null,n=0;o||(o={});var c=function(){n=o.leading===!1?0:Date.now(),d=null,i=r.apply(e,s),d||(e=s=null)};return function(){var l=Date.now();!n&&o.leading===!1&&(n=l);var u=a-(l-n);return e=this,s=arguments,u<=0||u>a?(d&&(clearTimeout(d),d=null),n=l,i=r.apply(e,s),d||(e=s=null)):!d&&o.trailing!==!1&&(d=setTimeout(c,u)),i}}function g(r,a){var o=this,e=a||{};this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.throttle?this._strokeMoveUpdate=Oe(g.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=g.prototype._strokeUpdate,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._canvas=r,this._ctx=r.getContext("2d"),this.clear(),this._handleMouseDown=function(s){s.which===1&&(o._mouseButtonDown=!0,o._strokeBegin(s))},this._handleMouseMove=function(s){o._mouseButtonDown&&o._strokeMoveUpdate(s)},this._handleMouseUp=function(s){s.which===1&&o._mouseButtonDown&&(o._mouseButtonDown=!1,o._strokeEnd(s))},this._handleTouchStart=function(s){if(s.targetTouches.length===1){var i=s.changedTouches[0];o._strokeBegin(i)}},this._handleTouchMove=function(s){s.preventDefault();var i=s.targetTouches[0];o._strokeMoveUpdate(i)},this._handleTouchEnd=function(s){var i=s.target===o._canvas;i&&(s.preventDefault(),o._strokeEnd(s))},this.on()}g.prototype.clear=function(){var r=this._ctx,a=this._canvas;r.fillStyle=this.backgroundColor,r.clearRect(0,0,a.width,a.height),r.fillRect(0,0,a.width,a.height),this._data=[],this._reset(),this._isEmpty=!0};g.prototype.fromDataURL=function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=new Image,s=o.ratio||window.devicePixelRatio||1,i=o.width||this._canvas.width/s,d=o.height||this._canvas.height/s;this._reset(),e.src=r,e.onload=function(){a._ctx.drawImage(e,0,0,i,d)},this._isEmpty=!1};g.prototype.toDataURL=function(r){var a;switch(r){case"image/svg+xml":return this._toSVG();default:for(var o=arguments.length,e=Array(o>1?o-1:0),s=1;s<o;s++)e[s-1]=arguments[s];return(a=this._canvas).toDataURL.apply(a,[r].concat(e))}};g.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};g.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};g.prototype.isEmpty=function(){return this._isEmpty};g.prototype._strokeBegin=function(r){this._data.push([]),this._reset(),this._strokeUpdate(r),typeof this.onBegin=="function"&&this.onBegin(r)};g.prototype._strokeUpdate=function(r){var a=r.clientX,o=r.clientY,e=this._createPoint(a,o),s=this._data[this._data.length-1],i=s&&s[s.length-1],d=i&&e.distanceTo(i)<this.minDistance;if(!(i&&d)){var n=this._addPoint(e),c=n.curve,l=n.widths;c&&l&&this._drawCurve(c,l.start,l.end),this._data[this._data.length-1].push({x:e.x,y:e.y,time:e.time,color:this.penColor})}};g.prototype._strokeEnd=function(r){var a=this.points.length>2,o=this.points[0];if(!a&&o&&this._drawDot(o),o){var e=this._data[this._data.length-1],s=e[e.length-1];o.equals(s)||e.push({x:o.x,y:o.y,time:o.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(r)};g.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};g.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};g.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};g.prototype._createPoint=function(r,a,o){var e=this._canvas.getBoundingClientRect();return new A(r-e.left,a-e.top,o||new Date().getTime())};g.prototype._addPoint=function(r){var a=this.points,o=void 0;if(a.push(r),a.length>2){a.length===3&&a.unshift(a[0]),o=this._calculateCurveControlPoints(a[0],a[1],a[2]);var e=o.c2;o=this._calculateCurveControlPoints(a[1],a[2],a[3]);var s=o.c1,i=new K(a[1],e,s,a[2]),d=this._calculateCurveWidths(i);return a.shift(),{curve:i,widths:d}}return{}};g.prototype._calculateCurveControlPoints=function(r,a,o){var e=r.x-a.x,s=r.y-a.y,i=a.x-o.x,d=a.y-o.y,n={x:(r.x+a.x)/2,y:(r.y+a.y)/2},c={x:(a.x+o.x)/2,y:(a.y+o.y)/2},l=Math.sqrt(e*e+s*s),u=Math.sqrt(i*i+d*d),x=n.x-c.x,m=n.y-c.y,p=u/(l+u),j={x:c.x+x*p,y:c.y+m*p},y=a.x-j.x,_=a.y-j.y;return{c1:new A(n.x+y,n.y+_),c2:new A(c.x+y,c.y+_)}};g.prototype._calculateCurveWidths=function(r){var a=r.startPoint,o=r.endPoint,e={start:null,end:null},s=this.velocityFilterWeight*o.velocityFrom(a)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(s);return e.start=this._lastWidth,e.end=i,this._lastVelocity=s,this._lastWidth=i,e};g.prototype._strokeWidth=function(r){return Math.max(this.maxWidth/(r+1),this.minWidth)};g.prototype._drawPoint=function(r,a,o){var e=this._ctx;e.moveTo(r,a),e.arc(r,a,o,0,2*Math.PI,!1),this._isEmpty=!1};g.prototype._drawCurve=function(r,a,o){var e=this._ctx,s=o-a,i=Math.floor(r.length());e.beginPath();for(var d=0;d<i;d+=1){var n=d/i,c=n*n,l=c*n,u=1-n,x=u*u,m=x*u,p=m*r.startPoint.x;p+=3*x*n*r.control1.x,p+=3*u*c*r.control2.x,p+=l*r.endPoint.x;var j=m*r.startPoint.y;j+=3*x*n*r.control1.y,j+=3*u*c*r.control2.y,j+=l*r.endPoint.y;var y=a+l*s;this._drawPoint(p,j,y)}e.closePath(),e.fill()};g.prototype._drawDot=function(r){var a=this._ctx,o=typeof this.dotSize=="function"?this.dotSize():this.dotSize;a.beginPath(),this._drawPoint(r.x,r.y,o),a.closePath(),a.fill()};g.prototype._fromData=function(r,a,o){for(var e=0;e<r.length;e+=1){var s=r[e];if(s.length>1)for(var i=0;i<s.length;i+=1){var d=s[i],n=new A(d.x,d.y,d.time),c=d.color;if(i===0)this.penColor=c,this._reset(),this._addPoint(n);else if(i!==s.length-1){var l=this._addPoint(n),u=l.curve,x=l.widths;u&&x&&a(u,x,c)}}else{this._reset();var m=s[0];o(m)}}};g.prototype._toSVG=function(){var r=this,a=this._data,o=this._canvas,e=Math.max(window.devicePixelRatio||1,1),s=0,i=0,d=o.width/e,n=o.height/e,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",o.width),c.setAttributeNS(null,"height",o.height),this._fromData(a,function(f,k,T){var R=document.createElement("path");if(!isNaN(f.control1.x)&&!isNaN(f.control1.y)&&!isNaN(f.control2.x)&&!isNaN(f.control2.y)){var W="M "+f.startPoint.x.toFixed(3)+","+f.startPoint.y.toFixed(3)+" "+("C "+f.control1.x.toFixed(3)+","+f.control1.y.toFixed(3)+" ")+(f.control2.x.toFixed(3)+","+f.control2.y.toFixed(3)+" ")+(f.endPoint.x.toFixed(3)+","+f.endPoint.y.toFixed(3));R.setAttribute("d",W),R.setAttribute("stroke-width",(k.end*2.25).toFixed(3)),R.setAttribute("stroke",T),R.setAttribute("fill","none"),R.setAttribute("stroke-linecap","round"),c.appendChild(R)}},function(f){var k=document.createElement("circle"),T=typeof r.dotSize=="function"?r.dotSize():r.dotSize;k.setAttribute("r",T),k.setAttribute("cx",f.x),k.setAttribute("cy",f.y),k.setAttribute("fill",f.color),c.appendChild(k)});var l="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+s+" "+i+" "+d+" "+n+'"')+(' width="'+d+'"')+(' height="'+n+'"')+">",x=c.innerHTML;if(x===void 0){var m=document.createElement("dummy"),p=c.childNodes;m.innerHTML="";for(var j=0;j<p.length;j+=1)m.appendChild(p[j].cloneNode(!0));x=m.innerHTML}var y="</svg>",_=u+x+y;return l+btoa(_)};g.prototype.fromData=function(r){var a=this;this.clear(),this._fromData(r,function(o,e){return a._drawCurve(o,e.start,e.end)},function(o){return a._drawDot(o)}),this._data=r};g.prototype.toData=function(){return this._data};var I={exports:{}},Ae=I.exports,ce;function Le(){return ce||(ce=1,(function(r,a){(function(o,e){r.exports=e()})(Ae,function(){return(function(o){function e(i){if(s[i])return s[i].exports;var d=s[i]={exports:{},id:i,loaded:!1};return o[i].call(d.exports,d,d.exports,e),d.loaded=!0,d.exports}var s={};return e.m=o,e.c=s,e.p="",e(0)})([function(o,e){function s(l){var u=l.getContext("2d"),x=l.width,m=l.height,p=u.getImageData(0,0,x,m).data,j=n(!0,x,m,p),y=n(!1,x,m,p),_=c(!0,x,m,p),f=c(!1,x,m,p),k=f-_+1,T=y-j+1,R=u.getImageData(_,j,k,T);return l.width=k,l.height=T,u.clearRect(0,0,k,T),u.putImageData(R,0,0),l}function i(l,u,x,m){return{red:m[4*(x*u+l)],green:m[4*(x*u+l)+1],blue:m[4*(x*u+l)+2],alpha:m[4*(x*u+l)+3]}}function d(l,u,x,m){return i(l,u,x,m).alpha}function n(l,u,x,m){for(var p=l?1:-1,j=l?0:x-1,y=j;l?y<x:y>-1;y+=p)for(var _=0;_<u;_++)if(d(_,y,u,m))return y;return null}function c(l,u,x,m){for(var p=l?1:-1,j=l?0:u-1,y=j;l?y<u:y>-1;y+=p)for(var _=0;_<x;_++)if(d(y,_,u,m))return y;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s}])})})(I)),I.exports}var We=Le();const ze=he(We);var Ue=["canvasProps","clearOnResize"],B=(function(r){Ce(o,r);var a=Te(o);function o(){var e;Pe(this,o);for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];return e=a.call.apply(a,[this].concat(i)),e.staticThis=e.constructor,e._sigPad=null,e._canvas=null,e.setRef=function(n){e._canvas=n,e._canvas===null&&(e._sigPad=null)},e._excludeOurProps=function(){var n=e.props;n.canvasProps,n.clearOnResize;var c=Ne(n,Ue);return c},e.componentDidMount=function(){var n=e.getCanvas();e._sigPad=new g(n,e._excludeOurProps()),e._resizeCanvas(),e.on()},e.componentWillUnmount=function(){e.off()},e.componentDidUpdate=function(){Object.assign(e._sigPad,e._excludeOurProps())},e.getCanvas=function(){if(e._canvas===null)throw e.staticThis.refNullError;return e._canvas},e.getTrimmedCanvas=function(){var n=e.getCanvas(),c=document.createElement("canvas");return c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(n,0,0),ze(c)},e.getSignaturePad=function(){if(e._sigPad===null)throw e.staticThis.refNullError;return e._sigPad},e._checkClearOnResize=function(){e.props.clearOnResize&&e._resizeCanvas()},e._resizeCanvas=function(){var n,c,l=(n=e.props.canvasProps)!==null&&n!==void 0?n:{},u=l.width,x=l.height;if(!(typeof u<"u"&&typeof x<"u")){var m=e.getCanvas(),p=Math.max((c=window.devicePixelRatio)!==null&&c!==void 0?c:1,1);typeof u>"u"&&(m.width=m.offsetWidth*p),typeof x>"u"&&(m.height=m.offsetHeight*p),m.getContext("2d").scale(p,p),e.clear()}},e.render=function(){var n=e.props.canvasProps;return pe.createElement("canvas",Y({ref:e.setRef},n))},e.on=function(){return window.addEventListener("resize",e._checkClearOnResize),e.getSignaturePad().on()},e.off=function(){return window.removeEventListener("resize",e._checkClearOnResize),e.getSignaturePad().off()},e.clear=function(){return e.getSignaturePad().clear()},e.isEmpty=function(){return e.getSignaturePad().isEmpty()},e.fromDataURL=function(n,c){return e.getSignaturePad().fromDataURL(n,c)},e.toDataURL=function(n,c){return e.getSignaturePad().toDataURL(n,c)},e.fromData=function(n){return e.getSignaturePad().fromData(n)},e.toData=function(){return e.getSignaturePad().toData()},e}return ke(o)})(E.Component);B.propTypes={velocityFilterWeight:C.number,minWidth:C.number,maxWidth:C.number,minDistance:C.number,dotSize:C.oneOfType([C.number,C.func]),penColor:C.string,throttle:C.number,onEnd:C.func,onBegin:C.func,canvasProps:C.object,clearOnResize:C.bool};B.defaultProps={clearOnResize:!0};B.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const ue=[{label:"Temperatura Ambiente",unit:"°C"},{label:"Umidade Relativa do Ar",unit:"%"},{label:"Temperatura do Substrato",unit:"°C"},{label:"Umidade Superficial do Substrato",unit:"%"},{label:"Temperatura da Mistura",unit:"°C"},{label:"Tempo de Mistura",unit:"Minutos"},{label:"Nº dos Lotes da Parte 1",unit:""},{label:"Nº dos Lotes da Parte 2",unit:""},{label:"Nº dos Lotes da Parte 3",unit:""},{label:"Nº de Kits Gastos",unit:""},{label:"Consumo Médio Obtido",unit:"m²/Kit"},{label:"Preparo de Substrato (fresagem e ancoragem)",unit:"m²/ml"},{label:"Aplicação de Uretano",unit:"",isMultiSelect:!0},{label:"Serviços de pintura",unit:"",isMultiSelect:!0},{label:"Serviços de pintura de layout",unit:"",isMultiSelect:!0},{label:"Aplicação de Epóxi",unit:"m²"},{label:"Corte / Selamento Juntas de Piso",unit:"ml"},{label:"Corte / Selamento Juntas em Muretas",unit:"ml"},{label:"Corte / Selamento Juntas em Rodapés",unit:"ml"},{label:"Remoção de Substrato Fraco",isDualField:!0,units:["m²","cm"]},{label:"Desbaste de Substrato",isDualField:!0,units:["m²","cm"]},{label:"Grauteamento",isDualField:!0,units:["m²","cm"]},{label:"Remoção e Reparo de Sub-Base",isDualField:!0,units:["m²","cm"]},{label:"Reparo com Concreto Uretânico",isDualField:!0,units:["m²","cm"]},{label:"Tratamento de Trincas",unit:"ml"},{label:"Execução de Lábios Poliméricos",unit:"ml"},{label:"Secagem de Substrato",unit:"m²"},{label:"Remoção de Revestimento Antigo",unit:"m²"},{label:"Polimento Mecânico de Substrato",unit:"m²"},{label:"Reparo de Revestimento em Piso",isDualField:!0,units:["m²","cm"]},{label:"Reparo de Revestimento em Muretas",unit:"ml"},{label:"Reparo de Revestimento em Rodapé",unit:"ml"},{label:"Quantos botijões de gás foram utilizados?",unit:""},{label:"Quantas bisnagas de selante foram utilizadas?",unit:""}],Ie=["Constatou-se água / umidade no substrato?","As áreas estavam com fechamento lateral?","Estado do substrato","Existe contaminações / crostas / incrustações no substrato?","Há concreto remontado sobre os bordos de ralos / canaletas / trilhos (ml)?","Há ralos / canaletas / trilhos desnivelados em relação ao substrato (ml)?","O boleado de rodapés / muretas foi executado com concreto?","Qual a espessura do piso de concreto?","Qual a profundidade dos cortes das juntas serradas?","As juntas serradas do piso foram aprofundadas por corte adicional? Em que extensão (ml)?","Existem juntas de dilatação no substrato (ml)?","As muretas estão ancoradas no piso?","Existem muretas apoiadas sobre juntas de dilatação no piso?","Existem juntas com bordas esborcinadas (ml)?","Existem trincas no substrato (ml)?","Existem serviços adicionais a serem realizados?","Os serviços adicionais foram liberados pela contratante?","O preposto acompanhou e conferiu as medições?","As áreas concluídas foram protegidas e isoladas?","O substrato foi fotografado?","Ocorreu alguma desconformidade durante ou após as aplicações?","Você relatou ao preposto as desconformidades?"],Ke=({token:r})=>{const{showToast:a,ToastComponent:o}=ge(),[e,s]=E.useState(!0),[i,d]=E.useState(null),[n,c]=E.useState(null),[l,u]=E.useState(""),[x,m]=E.useState(!1),[p,j]=E.useState(!1),[y,_]=E.useState(null),[f,k]=E.useState(null),[T,R]=E.useState(""),[W,Z]=E.useState(""),[q,ee]=E.useState(!1);E.useEffect(()=>{(async()=>{if(!r){u("ID do formulário não fornecido"),s(!1);return}s(!0),u("");try{const h=await H.getFormulario(r);if(!h.success||!h.data)throw new Error(h.error||"Formulário não encontrado");const{formulario:w,obra:P}=h.data;d(w),c(P)}catch(h){oe("❌ Erro ao carregar:",h),u("Erro ao carregar formulário")}finally{s(!1)}})()},[r]);const te=b=>{k(b),j(!0)},xe=async()=>{if(!q){if(!W.trim()){a("Por favor, informe seu nome completo","warning");return}if(!y||y.isEmpty()){a("Por favor, assine para confirmar","warning");return}if(f==="reprovar"&&!T.trim()){a("Por favor, informe o motivo da reprovação","warning");return}if(!(!n||!i))try{ee(!0);const b=y.toDataURL(),h=await H.assinarFormulario(r,{aprovado:f==="aprovar",assinatura:b,nomeCompleto:W.trim(),motivo:T||void 0});if(!h.success){a(h.error||"Erro ao processar assinatura","error");return}const w=await H.getFormulario(r);w.success&&d(w.data.formulario),m(!0),j(!1),a(f==="aprovar"?"Formulário aprovado com sucesso! ✓":"Formulário reprovado","success")}catch(b){oe("❌ Erro ao assinar:",b),a("Erro ao salvar validação. Tente novamente.","error")}finally{ee(!1)}}};if(e)return t.jsx("div",{className:"min-h-screen bg-[#EDEFE4] dark:bg-gray-950 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FD5521] mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]})});if(l)return t.jsx("div",{className:"min-h-screen bg-[#EDEFE4] dark:bg-gray-950 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center",children:[t.jsx(re,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Erro"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l})]})});if(x){const b=i?.statusPreposto==="aprovado";return t.jsx("div",{className:"min-h-screen bg-[#EDEFE4] dark:bg-gray-950 flex items-center justify-center p-4",children:t.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center",children:[t.jsx("div",{className:`w-16 h-16 ${b?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"} rounded-full flex items-center justify-center mx-auto mb-4`,children:b?t.jsx(se,{className:"w-10 h-10 text-green-600 dark:text-green-400"}):t.jsx(ae,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:b?"Formulário Aprovado!":"Formulário Reprovado"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:b?"Sua validação foi registrada com sucesso. A FC Pisos receberá a confirmação.":"Sua reprovação foi registrada. O encarregado será notificado para realizar as correções necessárias."}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Validado em: ",new Date().toLocaleString("pt-BR")]})]})})}if(!n||!i)return null;const V=b=>b?{sol:"Sol",nublado:"Nublado",chuva:"Chuva",lua:"Lua"}[b]||b:"Não informado";return t.jsxs("div",{className:"min-h-screen bg-[#EDEFE4] dark:bg-gray-950",children:[o,t.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#FD5521] rounded-xl flex items-center justify-center",children:t.jsx(ye,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Conferência de Formulário"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Validação de Diário de Obra"})]})]})})}),t.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-32",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 mb-4",children:[t.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Informações da Obra"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(be,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliente"}),t.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.cliente})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(ve,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Obra"}),t.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.obra})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(we,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cidade"}),t.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.cidade})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(je,{className:"w-5 h-5 text-gray-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data"}),t.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.data})]})]})]})]}),t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-4 mb-4",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx(re,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-300",children:[t.jsx("strong",{className:"block mb-1",children:"Instruções para Conferência"}),'Revise cuidadosamente todas as informações do formulário abaixo. Caso tudo esteja correto, clique em "Aprovar". Se houver alguma divergência ou problema, clique em "Reprovar" e informe o motivo.']})]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 mb-4",children:[t.jsx("h2",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Dados do Formulário"}),i.clima&&t.jsxs("section",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 text-sm",children:"Condições Ambientais"}),t.jsx("div",{className:"text-sm bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:t.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Manhã: ",t.jsx("strong",{children:V(i.clima.manha)})," - ","Tarde: ",t.jsx("strong",{children:V(i.clima.tarde)})," - ","Noite: ",t.jsx("strong",{children:V(i.clima.noite)})]})})]}),i.servicos&&Object.keys(i.servicos).some(b=>i.servicos[b])&&t.jsxs("section",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 text-sm",children:"Serviços Executados"}),Object.entries(i.servicos).map(([b,h])=>h?t.jsxs("div",{className:"space-y-4 mb-6",children:[(h.horarioInicioManha||h.horarioFimManha||h.horarioInicioTarde||h.horarioFimTarde||h.local)&&t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-2 text-sm",children:[(h.horarioInicioManha||h.horarioInicioTarde)&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horários:"}),t.jsxs("span",{className:"text-gray-900 dark:text-white",children:[h.horarioInicioManha&&h.horarioFimManha&&t.jsxs(t.Fragment,{children:["Manhã ",t.jsx("strong",{children:h.horarioInicioManha})," às ",t.jsx("strong",{children:h.horarioFimManha})]}),h.horarioInicioManha&&h.horarioFimManha&&h.horarioInicioTarde&&h.horarioFimTarde&&t.jsx(t.Fragment,{children:" - "}),h.horarioInicioTarde&&h.horarioFimTarde&&t.jsxs(t.Fragment,{children:["Tarde ",t.jsx("strong",{children:h.horarioInicioTarde})," às ",t.jsx("strong",{children:h.horarioFimTarde})]})]})]}),h.local&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Local:"}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:h.local})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 text-sm",children:["Etapas de Execução (Itens 1-34) - Total: ",ue.length," campos"]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:t.jsx("div",{className:"space-y-2 text-sm",children:ue.map((w,P)=>{const z=P+1;let v=h.etapas?.[w.label]||"-";if(w.isDualField&&v!=="-"){const[M,O]=v.split("|");if(M||O){const S=w.units?.[0]||"",N=w.units?.[1]||"";v=`${M||"-"} ${S} | ${O||"-"} ${N}`}}if(w.isMultiSelect&&v!=="-"){const M=v.split("|").filter(O=>O);M.length>0?v=M.map(S=>{const[N,D]=S.split(":");if(w.label==="Aplicação de Uretano"&&D)if(N==="Uretano para rodapé"||N==="Uretano para muretas"||N==="Uretano para Paredes"||N==="Uretano para Paredes, base e pilares"){const[U,L]=D.split("~");return U&&L?{tipo:N||"-",valor:`${U} ml / ${L} cm`}:{tipo:N||"-",valor:`${D} ml`}}else return{tipo:N||"-",valor:`${D} m²`};else{if(w.label==="Serviços de pintura")return{tipo:N||"-",valor:`${D} m²`};if(w.label==="Serviços de pintura de layout")return{tipo:N||"-",valor:`${D} ml`}}return{tipo:N||"-",valor:D||"-"}}).filter(S=>S.tipo!=="-"&&S.valor!=="-").map(S=>`${S.tipo}: ${S.valor}`).join(", ")||"-":v="-"}const F=v!=="-";return t.jsxs("div",{className:`flex gap-4 p-3 rounded-lg transition-colors ${F?"bg-white dark:bg-gray-900 border-l-4 border-[#FD5521]":"bg-gray-100/50 dark:bg-gray-800/30 border-l-4 border-gray-300 dark:border-gray-700"}`,children:[t.jsxs("span",{className:`min-w-[40px] font-bold ${F?"text-[#FD5521]":"text-gray-400 dark:text-gray-600"}`,children:[z,"."]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:`font-medium ${F?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:w.label}),t.jsx("div",{className:`mt-1 ${F?"text-gray-700 dark:text-gray-300 font-semibold":"text-gray-400 dark:text-gray-600 italic"}`,children:F?t.jsxs(t.Fragment,{children:[v,!w.isMultiSelect&&!w.isDualField&&w.unit&&` ${w.unit}`]}):"Não preenchido"})]})]},P)})})})]}),h.fotos&&h.fotos.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 text-sm",children:["Fotos (",h.fotos.length,"):"]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.fotos.map((w,P)=>t.jsx("img",{src:w,alt:`Foto ${P+1}`,loading:"lazy",decoding:"async",className:"w-full aspect-square object-contain rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"},P))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 text-sm",children:"Estado do Substrato (Itens 35-56):"}),t.jsx("div",{className:"space-y-2",children:Ie.map((w,P)=>{const z=`registro-${P}`,v=h.registros?.[z],F=35+P,M=P===2,O=P===17||P===21,S=P%2===0;if(M){const U=v?.texto||"-",L=v?.comentario||"";return t.jsxs("div",{className:`rounded-lg p-4 text-sm ${S?"bg-gray-50 dark:bg-gray-800/50":"bg-gray-100/50 dark:bg-gray-800/30"}`,children:[t.jsxs("div",{className:"font-medium text-gray-900 dark:text-white mb-2",children:[F,". ",w]}),t.jsx("div",{className:`${U!=="-"?"text-gray-700 dark:text-gray-300":"text-gray-400 dark:text-gray-600"}`,children:U}),(L||v?.foto)&&t.jsxs("div",{className:"flex gap-3 mt-2",children:[v?.foto&&t.jsx("img",{src:v.foto,alt:"Registro",className:"w-1/3 flex-shrink-0 aspect-square object-contain rounded border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"}),L&&t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-[15px] flex-1",children:[t.jsx("strong",{children:"Observações:"})," ",L]})]})]},z)}const N=v?.ativo?"SIM":"NÃO",D=N==="NÃO"||N==="SIM"&&O;return t.jsxs("div",{className:`rounded-lg p-4 text-sm ${S?"bg-gray-50 dark:bg-gray-800/50":"bg-gray-100/50 dark:bg-gray-800/30"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[F,". ",w]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${D?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:N})]}),v?.foto?t.jsxs("div",{className:"flex gap-3 mt-2",children:[t.jsx("img",{src:v.foto,alt:"Registro",className:"w-1/3 flex-shrink-0 aspect-square object-contain rounded border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[v?.texto&&t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-[15px]",children:[t.jsx("strong",{children:"Detalhes:"})," ",v.texto]}),v?.comentario&&t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-[15px]",children:[t.jsx("strong",{children:"Comentário:"})," ",v.comentario]})]})]}):t.jsxs(t.Fragment,{children:[v?.texto&&t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-[15px] mt-2",children:[t.jsx("strong",{children:"Detalhes:"})," ",v.texto]}),v?.comentario&&t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-[15px] mt-2",children:[t.jsx("strong",{children:"Comentário:"})," ",v.comentario]})]})]},z)})})]})]},b):null)]}),i.observacoes&&t.jsxs("section",{className:"mt-6",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 text-sm",children:"Observações Gerais"}),t.jsx("div",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:i.observacoes})]})]})]}),!p&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 p-4 z-20",children:t.jsxs("div",{className:"max-w-4xl mx-auto flex gap-3",children:[t.jsxs("button",{onClick:()=>te("reprovar"),className:"flex-1 px-6 py-4 rounded-xl bg-red-500 text-white font-medium hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx(ae,{className:"w-5 h-5"}),"Reprovar"]}),t.jsxs("button",{onClick:()=>te("aprovar"),className:"flex-1 px-6 py-4 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx(se,{className:"w-5 h-5"}),"Aprovar"]})]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end sm:items-center justify-center p-4 z-50",children:t.jsx(ie.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-900 rounded-t-3xl sm:rounded-3xl w-full max-w-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:f==="aprovar"?"Aprovar Formulário":"Reprovar Formulário"}),f==="reprovar"&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo da Reprovação *"}),t.jsx("textarea",{value:T,onChange:b=>R(b.target.value),placeholder:"Descreva o que precisa ser corrigido...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40 min-h-[100px] resize-none"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome Completo *"}),t.jsx("input",{type:"text",value:W,onChange:b=>Z(b.target.value),placeholder:"Digite seu nome completo",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assinatura *"}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl overflow-hidden",children:t.jsx(B,{ref:b=>_(b),canvasProps:{className:"w-full h-48 bg-white dark:bg-gray-800"}})}),t.jsx("button",{onClick:()=>y?.clear(),className:"mt-2 text-sm text-[#FD5521] hover:text-[#E54A1D]",children:"Limpar assinatura"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{j(!1),k(null),R(""),Z("")},className:"flex-1 px-6 py-3 rounded-xl bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white font-medium hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),t.jsx("button",{onClick:xe,className:`flex-1 px-6 py-3 rounded-xl text-white font-medium transition-colors ${f==="aprovar"?"bg-green-600 hover:bg-green-700":"bg-red-500 hover:bg-red-600"}`,disabled:q,children:q?"Processando...":`Confirmar ${f==="aprovar"?"Aprovação":"Reprovação"}`})]})]})})})]})};export{Ke as default};
