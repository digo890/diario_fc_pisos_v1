import{r as c,j as W}from"./index-B8AJ77RJ.js";import{g as bt,s as ut,a as lt,b as $,c as ct,d as Tt,e as It,f as Rt,h as jt,r as kt,j as Ft,k as ht,l as Ot,m as Gt,n as Wt,o as Ht,S as Bt,H as Ut,F as E,p as Nt,q as ft,t as b,u as zt,v as X,w as S,x as dt,y as _t,z as $t,A as Xt,B as T,C as H,D as Y,E as Yt,G as Kt,I as x,J as qt,K as Jt,L as Qt,M as K,N as Zt,O as te,P as ee,Q as ne,R as D,T as se,U as oe,V as mt,W as ie,X as re}from"./motion-vendor-B3HUmrK1.js";const pt=c.createContext({});function ae(e){const t=c.useRef(null);return t.current===null&&(t.current=e()),t.current}const gt=typeof window<"u",ue=gt?c.useLayoutEffect:c.useEffect,N=c.createContext(null),vt=c.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function le(e=!0){const t=c.useContext(N);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,i=c.useId();c.useEffect(()=>{if(e)return o(i)},[e]);const r=c.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,r]:[!0]}const yt=c.createContext({strict:!1}),q={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let J=!1;function ce(){if(J)return;const e={};for(const t in q)e[t]={isEnabled:n=>q[t].some(s=>!!n[s])};ut(e),J=!0}function Pt(){return ce(),bt()}function he(e){const t=Pt();for(const n in e)t[n]={...t[n],...e[n]};ut(t)}const fe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function I(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fe.has(e)}let wt=e=>!I(e);function de(e){typeof e=="function"&&(wt=t=>t.startsWith("on")?!I(t):e(t))}try{de(require("@emotion/is-prop-valid").default)}catch{}function me(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(wt(o)||n===!0&&I(o)||!t&&!I(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}const R=c.createContext({});function pe(e,t){if(lt(e)){const{initial:n,animate:s}=e;return{initial:n===!1||$(n)?n:void 0,animate:$(s)?s:void 0}}return e.inherit!==!1?t:{}}function ge(e){const{initial:t,animate:n}=pe(e,c.useContext(R));return c.useMemo(()=>({initial:t,animate:n}),[Q(t),Q(n)])}function Q(e){return Array.isArray(e)?e.join(" "):e}const z=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xt(e,t,n){for(const s in t)!ct(t[s])&&!Tt(s,n)&&(e[s]=t[s])}function ve({transformTemplate:e},t){return c.useMemo(()=>{const n=z();return It(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ye(e,t){const n=e.style||{},s={};return xt(s,n,e),Object.assign(s,ve(e,t)),s}function Pe(e,t){const n={},s=ye(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const St=()=>({...z(),attrs:{}});function we(e,t,n,s){const o=c.useMemo(()=>{const i=St();return Rt(i,t,jt(s),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};xt(i,e.style,e),o.style={...i,...o.style}}return o}const xe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _(e){return typeof e!="string"||e.includes("-")?!1:!!(xe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Se(e,t,n,{latestValues:s},o,i=!1,r){const h=(r??_(e)?we:Pe)(t,s,o,e),d=me(t,typeof e=="string",i),f=e!==c.Fragment?{...d,...h,ref:n}:{},{children:l}=t,a=c.useMemo(()=>ct(l)?l.get():l,[l]);return c.createElement(e,{...f,children:a})}function Ee({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,o){return{latestValues:Ce(n,s,o,e),renderState:t()}}function Ce(e,t,n,s){const o={},i=s(e,{});for(const a in i)o[a]=kt(i[a]);let{initial:r,animate:u}=e;const h=lt(e),d=Ft(e);t&&d&&!h&&e.inherit!==!1&&(r===void 0&&(r=t.initial),u===void 0&&(u=t.animate));let f=n?n.initial===!1:!1;f=f||r===!1;const l=f?u:r;if(l&&typeof l!="boolean"&&!ht(l)){const a=Array.isArray(l)?l:[l];for(let m=0;m<a.length;m++){const p=Ot(e,a[m]);if(p){const{transitionEnd:g,transition:v,...P}=p;for(const y in P){let w=P[y];if(Array.isArray(w)){const A=f?w.length-1:0;w=w[A]}w!==null&&(o[y]=w)}for(const y in g)o[y]=g[y]}}}return o}const Et=e=>(t,n)=>{const s=c.useContext(R),o=c.useContext(N),i=()=>Ee(e,t,s,o);return n?i():ae(i)},Me=Et({scrapeMotionValuesFromProps:Gt,createRenderState:z}),Ve=Et({scrapeMotionValuesFromProps:Wt,createRenderState:St}),Ae=Symbol.for("motionComponentSymbol");function Le(e,t,n){const s=c.useRef(n);c.useInsertionEffect(()=>{s.current=n});const o=c.useRef(null);return c.useCallback(i=>{i&&e.onMount?.(i),t&&(i?t.mount(i):t.unmount());const r=s.current;if(typeof r=="function")if(i){const u=r(i);typeof u=="function"&&(o.current=u)}else o.current?(o.current(),o.current=null):r(i);else r&&(r.current=i)},[t])}const Ct=c.createContext({});function C(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function De(e,t,n,s,o,i){const{visualElement:r}=c.useContext(R),u=c.useContext(yt),h=c.useContext(N),d=c.useContext(vt).reducedMotion,f=c.useRef(null),l=c.useRef(!1);s=s||u.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:r,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d,isSVG:i}),l.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const a=f.current,m=c.useContext(Ct);a&&!a.projection&&o&&(a.type==="html"||a.type==="svg")&&be(f.current,n,o,m);const p=c.useRef(!1);c.useInsertionEffect(()=>{a&&p.current&&a.update(n,h)});const g=n[Ht],v=c.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return ue(()=>{l.current=!0,a&&(p.current=!0,window.MotionIsMounted=!0,a.updateFeatures(),a.scheduleRenderMicrotask(),v.current&&a.animationState&&a.animationState.animateChanges())}),c.useEffect(()=>{a&&(!v.current&&a.animationState&&a.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),v.current=!1),a.enteringChildren=void 0)}),a}function be(e,t,n,s){const{layoutId:o,layout:i,drag:r,dragConstraints:u,layoutScroll:h,layoutRoot:d,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Mt(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!r||u&&C(u),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:h,layoutRoot:d})}function Mt(e){if(e)return e.options.allowProjection!==!1?e.projection:Mt(e.parent)}function j(e,{forwardMotionProps:t=!1,type:n}={},s,o){s&&he(s);const i=n?n==="svg":_(e),r=i?Ve:Me;function u(d,f){let l;const a={...c.useContext(vt),...d,layoutId:Te(d)},{isStatic:m}=a,p=ge(d),g=r(d,m);if(!m&&gt){Ie();const v=Re(a);l=v.MeasureLayout,p.visualElement=De(e,g,a,o,v.ProjectionNode,i)}return W.jsxs(R.Provider,{value:p,children:[l&&p.visualElement?W.jsx(l,{visualElement:p.visualElement,...a}):null,Se(e,d,Le(g,p.visualElement,f),g,m,t,i)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const h=c.forwardRef(u);return h[Ae]=e,h}function Te({layoutId:e}){const t=c.useContext(pt).id;return t&&e!==void 0?t+"-"+e:e}function Ie(e,t){c.useContext(yt).strict}function Re(e){const t=Pt(),{drag:n,layout:s}=t;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n?.isEnabled(e)||s?.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function je(e,t){if(typeof Proxy>"u")return j;const n=new Map,s=(i,r)=>j(i,r,e,t),o=(i,r)=>s(i,r);return new Proxy(o,{get:(i,r)=>r==="create"?s:(n.has(r)||n.set(r,j(r,void 0,e,t)),n.get(r))})}const ke=(e,t)=>t.isSVG??_(e)?new Bt(t):new Ut(t,{allowProjection:e!==c.Fragment});class Fe extends E{constructor(t){super(t),t.animationState||(t.animationState=Nt(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ht(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Oe=0;class Ge extends E{constructor(){super(...arguments),this.id=Oe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const We={animation:{Feature:Fe},exit:{Feature:Ge}};function V(e){return{point:{x:e.pageX,y:e.pageY}}}const He=e=>t=>ft(t)&&e(t,V(t));function M(e,t,n,s){return b(e,t,He(n),s)}const Vt=({current:e})=>e?e.ownerDocument.defaultView:null,Z=new Set(["auto","scroll"]);class At{constructor(t,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:r=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=F(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=zt(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:v}=m,{timestamp:P}=X;this.history.push({...v,timestamp:P});const{onStart:y,onMove:w}=this.handlers;p||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=k(p,this.transformPagePoint),S.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=F(m.type==="pointercancel"?this.lastMoveEventInfo:k(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,y),v&&v(m,y)},!ft(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=o||window;const h=V(t),d=k(h,this.transformPagePoint),{point:f}=d,{timestamp:l}=X;this.history=[{...f,timestamp:l}];const{onSessionStart:a}=n;a&&a(t,F(d,this.history)),this.removeListeners=dt(M(this.contextWindow,"pointermove",this.handlePointerMove),M(this.contextWindow,"pointerup",this.handlePointerUp),M(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let n=t.parentElement;for(;n;){const s=getComputedStyle(n);(Z.has(s.overflowX)||Z.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const s=t===window,o=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:o.x-n.x,y:o.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,o),S.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),_t(this.updatePoint)}}function k(e,t){return t?{point:t(e.point)}:e}function tt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function F({point:e},t){return{point:e,delta:tt(e,Lt(t)),offset:tt(e,Be(t)),velocity:Ue(t,.1)}}function Be(e){return e[0]}function Lt(e){return e[e.length-1]}function Ue(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const o=Lt(e);for(;n>=0&&(s=e[n],!(o.timestamp-s.timestamp>$t(t)));)n--;if(!s)return{x:0,y:0};const i=Xt(o.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const r={x:(o.x-s.x)/i,y:(o.y-s.y)/i};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function Ne(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?T(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?T(n,e,s.max):Math.min(e,n)),e}function et(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ze(e,{top:t,left:n,bottom:s,right:o}){return{x:et(e.x,n,o),y:et(e.y,t,s)}}function nt(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function _e(e,t){return{x:nt(e.x,t.x),y:nt(e.y,t.y)}}function $e(e,t){let n=.5;const s=H(e),o=H(t);return o>s?n=Y(t.min,t.max-s,e.min):s>o&&(n=Y(e.min,e.max-o,t.min)),Yt(0,1,n)}function Xe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const B=.35;function Ye(e=B){return e===!1?e=0:e===!0&&(e=B),{x:st(e,"left","right"),y:st(e,"top","bottom")}}function st(e,t,n){return{min:ot(e,t),max:ot(e,n)}}function ot(e,t){return typeof e=="number"?e:e[t]||0}const Ke=new WeakMap;class qe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=l=>{n?(this.stopAnimation(),this.snapToCursor(V(l).point)):this.pauseAnimation()},r=(l,a)=>{this.stopAnimation();const{drag:m,dragPropagation:p,onDragStart:g}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=te(m),!this.openDragLock))return;this.latestPointerEvent=l,this.latestPanInfo=a,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),x(P=>{let y=this.getAxisMotionValue(P).get()||0;if(ee.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const A=w.layout.layoutBox[P];A&&(y=H(A)*(parseFloat(y)/100))}}this.originPoint[P]=y}),g&&S.postRender(()=>g(l,a)),K(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},u=(l,a)=>{this.latestPointerEvent=l,this.latestPanInfo=a;const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:P}=a;if(p&&this.currentDirection===null){this.currentDirection=Je(P),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",a.point,P),this.updateAxis("y",a.point,P),this.visualElement.render(),v&&v(l,a)},h=(l,a)=>{this.latestPointerEvent=l,this.latestPanInfo=a,this.stop(l,a),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>x(l=>this.getAnimationState(l)==="paused"&&this.getAxisMotionValue(l).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new At(t,{onSessionStart:i,onStart:r,onMove:u,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:Vt(this.visualElement),element:this.visualElement.current})}stop(t,n){const s=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!s)return;const{velocity:r}=o;this.startAnimation(r);const{onDragEnd:u}=this.getProps();u&&S.postRender(()=>u(s,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,s){const{drag:o}=this.getProps();if(!s||!L(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(r=Ne(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;t&&C(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=ze(s.layoutBox,t):this.constraints=!1,this.elastic=Ye(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&x(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Xe(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!C(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=qt(s,o.root,this.visualElement.getTransformPagePoint());let r=_e(o.layout.layoutBox,i);if(n){const u=n(Jt(r));this.hasMutatedConstraints=!!u,u&&(r=Qt(u))}return r}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},d=x(f=>{if(!L(f,n,this.currentDirection))return;let l=h&&h[f]||{};r&&(l={min:0,max:0});const a=o?200:1e6,m=o?40:1e7,p={type:"inertia",velocity:s?t[f]:0,bounceStiffness:a,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(f,p)});return Promise.all(d).then(u)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return K(this.visualElement,t),s.start(Zt(t,s,0,n,this.visualElement,!1))}stopAnimation(){x(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){x(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){x(n=>{const{drag:s}=this.getProps();if(!L(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:r,max:u}=o.layout.layoutBox[n],h=i.get()||0;i.set(t[n]-T(r,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!C(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};x(r=>{const u=this.getAxisMotionValue(r);if(u&&this.constraints!==!1){const h=u.get();o[r]=$e({min:h,max:h},this.constraints[r])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),x(r=>{if(!L(r,t,null))return;const u=this.getAxisMotionValue(r),{min:h,max:d}=this.constraints[r];u.set(T(h,d,o[r]))})}addListeners(){if(!this.visualElement.current)return;Ke.set(this.visualElement,this);const t=this.visualElement.current,n=M(t,"pointerdown",h=>{const{drag:d,dragListener:f=!0}=this.getProps(),l=h.target,a=l!==t&&ne(l);d&&f&&!a&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();C(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),S.read(s);const r=b(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(x(f=>{const l=this.getAxisMotionValue(f);l&&(this.originPoint[f]+=h[f].translate,l.set(l.get()+h[f].translate))}),this.visualElement.render())}));return()=>{r(),n(),i(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:r=B,dragMomentum:u=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:i,dragElastic:r,dragMomentum:u}}}function L(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Je(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Qe extends E{constructor(t){super(t),this.removeGroupControls=D,this.removeListeners=D,this.controls=new qe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||D}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const it=e=>(t,n)=>{e&&S.postRender(()=>e(t,n))};class Ze extends E{constructor(){super(...arguments),this.removePointerDownListener=D}onPointerDown(t){this.session=new At(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vt(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:it(t),onStart:it(n),onMove:s,onEnd:(i,r)=>{delete this.session,o&&S.postRender(()=>o(i,r))}}}mount(){this.removePointerDownListener=M(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let O=!1;class tn extends c.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&o&&s.register(i),O&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),oe.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:o,isPresent:i}=this.props,{projection:r}=s;return r&&(r.isPresent=i,t.layoutDependency!==n&&r.setOptions({...r.options,layoutDependency:n}),O=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||S.postRender(()=>{const u=r.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),se.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=t;O=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Dt(e){const[t,n]=le(),s=c.useContext(pt);return W.jsx(tn,{...e,layoutGroup:s,switchLayoutGroup:c.useContext(Ct),isPresent:t,safeToRemove:n})}const en={pan:{Feature:Ze},drag:{Feature:Qe,ProjectionNode:mt,MeasureLayout:Dt}};function rt(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=s[o];i&&S.postRender(()=>i(t,V(t)))}class nn extends E{mount(){const{current:t}=this.node;t&&(this.unmount=ie(t,(n,s)=>(rt(this.node,s,"Start"),o=>rt(this.node,o,"End"))))}unmount(){}}class sn extends E{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dt(b(this.node.current,"focus",()=>this.onFocus()),b(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function at(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=s[o];i&&S.postRender(()=>i(t,V(t)))}class on extends E{mount(){const{current:t}=this.node;t&&(this.unmount=re(t,(n,s)=>(at(this.node,s,"Start"),(o,{success:i})=>at(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const U=new WeakMap,G=new WeakMap,rn=e=>{const t=U.get(e.target);t&&t(e)},an=e=>{e.forEach(rn)};function un({root:e,...t}){const n=e||document;G.has(n)||G.set(n,{});const s=G.get(n),o=JSON.stringify(t);return s[o]||(s[o]=new IntersectionObserver(an,{root:e,...t})),s[o]}function ln(e,t,n){const s=un(t);return U.set(e,n),s.observe(e),()=>{U.delete(e),s.unobserve(e)}}const cn={some:0,all:1};class hn extends E{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:i}=t,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:cn[o]},u=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:l}=this.node.getProps(),a=d?f:l;a&&a(h)};return ln(this.node.current,r,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(fn(t,n))&&this.startObserver()}unmount(){}}function fn({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const dn={inView:{Feature:hn},tap:{Feature:on},focus:{Feature:sn},hover:{Feature:nn}},mn={layout:{ProjectionNode:mt,MeasureLayout:Dt}},pn={...We,...dn,...en,...mn},Pn=je(pn,ke);export{pt as L,vt as M,N as P,le as a,ue as b,Pn as m,ae as u};
