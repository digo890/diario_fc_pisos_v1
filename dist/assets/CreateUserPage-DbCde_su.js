import{h as E,r as l,j as e,n as F,G as S}from"./index-B8AJ77RJ.js";import{A as $}from"./arrow-left-DuykKinw.js";import{U as A}from"./user-round-Cd62TeDe.js";import{M as P}from"./mail-GLqEnMpV.js";import{P as U,E as p,a as g}from"./phone-B34cdH7r.js";import{L as h}from"./lock-DvTB73o1.js";import{m as f}from"./proxy-BZL43_Lm.js";import"./react-vendor-7PqXWhc5.js";import"./motion-vendor-B3HUmrK1.js";const B=({onBack:y,onSuccess:b})=>{const{showToast:d,ToastComponent:C}=E(),[r,o]=l.useState({nome:"",tipo:"Encarregado",email:"",telefone:"",senha:"",confirmarSenha:""}),[s,w]=l.useState({nome:!1,tipo:!1,email:!1,senhas:!1}),[c,k]=l.useState(!1),[u,v]=l.useState(!1),[m,x]=l.useState(!1),j=async a=>{if(a.preventDefault(),m)return;let n=!1;const t={nome:!1,tipo:!1,email:!1,senhas:!1};if(r.nome||(t.nome=!0,n=!0),r.tipo||(t.tipo=!0,n=!0),r.email||(t.email=!0,n=!0),r.senha&&r.senha!==r.confirmarSenha&&(t.senhas=!0,n=!0,d("As senhas não coincidem","error")),n){w(t);return}x(!0);try{const i=await F.create({nome:r.nome,email:r.email,senha:r.senha||"senha123",tipo:r.tipo});if(i.success){const D={id:i.data.id,nome:r.nome,tipo:r.tipo,email:r.email,telefone:r.telefone,createdAt:Date.now()};await S(D),d("Usuário criado com sucesso!","success"),setTimeout(()=>{b()},1e3)}else d(`Erro ao criar usuário: ${i.error}`,"error")}catch(i){console.error("❌ Erro ao criar usuário:",i),d(`Erro ao criar usuário: ${i.message}`,"error")}finally{x(!1)}},N=a=>{const t=a.replace(/\D/g,"").slice(0,11);return t.length<=2?t:t.length<=7?`(${t.slice(0,2)}) ${t.slice(2)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7)}`};return e.jsxs(f.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{duration:.3,ease:[.4,0,.2,1]},className:"fixed inset-0 bg-background z-50 flex flex-col",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"px-4 py-4 flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-600 dark:text-gray-400",children:e.jsx($,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Novo Usuário"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-[#EDEFE4] dark:bg-gray-900",children:e.jsxs("form",{onSubmit:j,className:"max-w-3xl mx-auto p-4 space-y-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C6CCC2] dark:text-gray-600 pointer-events-none transition-colors group-focus-within:text-[#FD5521] dark:group-focus-within:text-[#FD5521]"}),e.jsx("input",{type:"text",value:r.nome,onChange:a=>o({...r,nome:a.target.value}),className:`w-full pl-12 pr-4 py-3 rounded-xl 
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                       border border-transparent dark:border-gray-800
                       placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500
                       focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40
                       ${s.nome?"ring-2 ring-red-500":""}`,placeholder:"Nome completo *"}),s.nome&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:"Campo obrigatório"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:`relative inline-flex w-full p-1 bg-[#DDE1D7] dark:bg-gray-800 rounded-lg ${s.tipo?"ring-2 ring-red-500":""}`,children:[e.jsx("div",{className:`absolute top-1 bottom-1 w-[calc(50%-4px)] bg-white dark:bg-gray-900 rounded-md shadow-md transition-transform duration-200 ease-out ${r.tipo==="Administrador"?"translate-x-[calc(100%+8px)]":"translate-x-0"}`}),e.jsx("button",{type:"button",onClick:()=>o({...r,tipo:"Encarregado"}),className:`relative z-10 flex-1 px-4 py-2.5 text-sm font-medium rounded-md transition-colors ${r.tipo==="Encarregado"?"text-[#FD5521]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Encarregado"}),e.jsx("button",{type:"button",onClick:()=>o({...r,tipo:"Administrador"}),className:`relative z-10 flex-1 px-4 py-2.5 text-sm font-medium rounded-md transition-colors ${r.tipo==="Administrador"?"text-[#FD5521]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Administrador"})]}),s.tipo&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:"Campo obrigatório"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C6CCC2] dark:text-gray-600 pointer-events-none transition-colors group-focus-within:text-[#FD5521] dark:group-focus-within:text-[#FD5521]"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>o({...r,email:a.target.value}),className:`w-full pl-12 pr-4 py-3 rounded-xl 
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                       border border-transparent dark:border-gray-800
                       placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500
                       focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40
                       ${s.email?"ring-2 ring-red-500":""}`,placeholder:"Email *"}),s.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:"Campo obrigatório"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C6CCC2] dark:text-gray-600 pointer-events-none transition-colors group-focus-within:text-[#FD5521] dark:group-focus-within:text-[#FD5521]"}),e.jsx("input",{type:"tel",value:r.telefone,onChange:a=>o({...r,telefone:N(a.target.value)}),className:`w-full pl-12 pr-4 py-3 rounded-xl \r
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white\r
                       border border-transparent dark:border-gray-800\r
                       placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500\r
                       focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40`,placeholder:"Telefone"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(h,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C6CCC2] dark:text-gray-600 pointer-events-none transition-colors group-focus-within:text-[#FD5521] dark:group-focus-within:text-[#FD5521]"}),e.jsx("input",{type:c?"text":"password",value:r.senha,onChange:a=>o({...r,senha:a.target.value}),className:`w-full pl-12 pr-12 py-3 rounded-xl \r
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white\r
                       border border-transparent dark:border-gray-800\r
                       placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500\r
                       focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40`,placeholder:"Senha"}),e.jsx("button",{type:"button",className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-[#C6CCC2] dark:text-gray-600",onClick:()=>k(!c),"aria-label":c?"Ocultar senha":"Mostrar senha",children:c?e.jsx(p,{className:"w-5 h-5"}):e.jsx(g,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(h,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C6CCC2] dark:text-gray-600 pointer-events-none transition-colors group-focus-within:text-[#FD5521] dark:group-focus-within:text-[#FD5521]"}),e.jsx("input",{type:u?"text":"password",value:r.confirmarSenha,onChange:a=>o({...r,confirmarSenha:a.target.value}),className:`w-full pl-12 pr-12 py-3 rounded-xl 
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                       border border-transparent dark:border-gray-800
                       placeholder:text-[#C6CCC2] dark:placeholder:text-gray-500
                       focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40
                       ${s.senhas?"ring-2 ring-red-500":""}`,placeholder:"Confirmar senha"}),e.jsx("button",{type:"button",className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-[#C6CCC2] dark:text-gray-600",onClick:()=>v(!u),"aria-label":u?"Ocultar confirmação de senha":"Mostrar confirmação de senha",children:u?e.jsx(p,{className:"w-5 h-5"}):e.jsx(g,{className:"w-5 h-5"})}),s.senhas&&e.jsx("p",{className:"text-red-500 text-xs mt-1 ml-1",children:"As senhas não coincidem"})]}),e.jsxs("button",{type:"submit",disabled:m,className:"relative w-full px-6 py-3 rounded-xl bg-[#FD5521] text-white font-medium hover:bg-[#E54A1D] transition-colors mt-6 focus:outline-none focus:ring-2 focus:ring-[#FD5521]/40 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",children:[m&&e.jsx(f.div,{className:"absolute inset-0 bg-[#E54A1D]",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,ease:"linear"}}),e.jsx("span",{className:"relative z-10",children:m?"Criando usuário...":"Criar Usuário"})]})]})}),C]})};export{B as default};
